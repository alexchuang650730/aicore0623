<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agentic Agent ç®¡ç†ä¸­å¿ƒ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.98);
            min-height: 100vh;
            box-shadow: 0 0 50px rgba(0, 0, 0, 0.1);
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        .header h1 {
            font-size: 2.2em;
            font-weight: 300;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .header .status {
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 0.9em;
        }

        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #4caf50;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .nav-tabs {
            background: #f8f9fa;
            border-bottom: 1px solid #dee2e6;
            padding: 0 40px;
            display: flex;
            gap: 0;
        }

        .nav-tab {
            background: none;
            border: none;
            padding: 15px 25px;
            cursor: pointer;
            font-size: 1em;
            color: #6c757d;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
            position: relative;
        }

        .nav-tab:hover {
            color: #495057;
            background: rgba(102, 126, 234, 0.05);
        }

        .nav-tab.active {
            color: #667eea;
            border-bottom-color: #667eea;
            background: white;
        }

        .main-content {
            padding: 40px;
            min-height: calc(100vh - 200px);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            border: 1px solid #e9ecef;
            transition: all 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f8f9fa;
        }

        .card-icon {
            font-size: 2.5em;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 12px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .card-title {
            font-size: 1.3em;
            font-weight: 600;
            color: #333;
        }

        .metric-value {
            font-size: 2.5em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
        }

        .metric-label {
            color: #6c757d;
            font-size: 0.9em;
        }

        .action-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            margin-bottom: 30px;
        }

        .action-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f8f9fa;
        }

        .action-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .action-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 20px;
            border-radius: 12px;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 15px;
            text-align: left;
        }

        .action-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }

        .action-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .action-icon {
            font-size: 1.5em;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 8px;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }

        .input-field {
            width: 100%;
            padding: 15px;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            font-size: 1em;
            transition: border-color 0.3s ease;
        }

        .input-field:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .textarea-field {
            min-height: 120px;
            resize: vertical;
            font-family: 'Courier New', monospace;
        }

        .code-editor {
            min-height: 200px;
            font-family: 'Courier New', monospace;
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            padding: 15px;
            font-size: 0.9em;
        }

        .results-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            margin-top: 30px;
            display: none;
        }

        .results-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f8f9fa;
        }

        .results-content {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #667eea;
            white-space: pre-wrap;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            line-height: 1.6;
        }

        .loading {
            text-align: center;
            padding: 40px;
            display: none;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .tool-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .tool-item {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 10px;
            padding: 20px;
            transition: all 0.3s ease;
        }

        .tool-item:hover {
            border-color: #667eea;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.1);
        }

        .tool-name {
            font-weight: bold;
            color: #333;
            margin-bottom: 8px;
        }

        .tool-description {
            color: #6c757d;
            font-size: 0.9em;
            margin-bottom: 10px;
        }

        .tool-capabilities {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
        }

        .capability-tag {
            background: #e9ecef;
            color: #495057;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.75em;
        }

        .language-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .language-btn {
            padding: 8px 16px;
            border: 2px solid #dee2e6;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .language-btn.active {
            border-color: #667eea;
            background: #667eea;
            color: white;
        }

        @media (max-width: 768px) {
            .header {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            .main-content {
                padding: 20px;
            }
            
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            
            .action-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>
                ğŸ¤– Agentic Agent ç®¡ç†ä¸­å¿ƒ
            </h1>
            <div class="status">
                <div class="status-indicator"></div>
                <span>ç³»çµ±é‹è¡Œä¸­</span>
                <span id="currentTime"></span>
            </div>
        </div>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="switchTab('dashboard')">ğŸ“Š å„€è¡¨æ¿</button>
            <button class="nav-tab" onclick="switchTab('agent')">ğŸ¤– Agent ç®¡ç†</button>
            <button class="nav-tab" onclick="switchTab('tools')">ğŸ”§ å·¥å…·ç®¡ç†</button>
            <button class="nav-tab" onclick="switchTab('code-execution')">ğŸ’» ä»£ç¢¼åŸ·è¡Œ</button>
            <button class="nav-tab" onclick="switchTab('execution')">âš¡ åŸ·è¡Œä¸­å¿ƒ</button>
            <button class="nav-tab" onclick="switchTab('monitoring')">ğŸ“ˆ ç›£æ§ä¸­å¿ƒ</button>
            <button class="nav-tab" onclick="switchTab('deployment')">ğŸš€ éƒ¨ç½²ç®¡ç†</button>
        </div>

        <div class="main-content">
            <!-- å„€è¡¨æ¿ -->
            <div id="dashboard" class="tab-content active">
                <div class="dashboard-grid">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-icon">ğŸ¤–</div>
                            <div class="card-title">Agent ç‹€æ…‹</div>
                        </div>
                        <div class="metric-value" id="agentStatus">é‹è¡Œä¸­</div>
                        <div class="metric-label">å¢å¼·ç‰ˆç°¡åŒ–Agentæ¶æ§‹</div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-icon">ğŸ”§</div>
                            <div class="card-title">å¯ç”¨å·¥å…·</div>
                        </div>
                        <div class="metric-value" id="toolCount">-</div>
                        <div class="metric-label">å·²è¨»å†Šå·¥å…·æ•¸é‡</div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-icon">âš¡</div>
                            <div class="card-title">åŸ·è¡Œä»»å‹™</div>
                        </div>
                        <div class="metric-value" id="taskCount">0</div>
                        <div class="metric-label">ç•¶å‰åŸ·è¡Œä¸­ä»»å‹™</div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-icon">ğŸ“ˆ</div>
                            <div class="card-title">ç³»çµ±æ€§èƒ½</div>
                        </div>
                        <div class="metric-value" id="performance">å„ªç§€</div>
                        <div class="metric-label">å¹³å‡éŸ¿æ‡‰æ™‚é–“ < 200ms</div>
                    </div>
                </div>

                <div class="action-section">
                    <div class="action-header">
                        <div class="card-icon">ğŸš€</div>
                        <h3>å¿«é€Ÿæ“ä½œ</h3>
                    </div>
                    <div class="action-grid">
                        <button class="action-btn" onclick="quickAnalysis()">
                            <div class="action-icon">ğŸ”</div>
                            <div>
                                <div>å¿«é€Ÿåˆ†æ</div>
                                <small>å•Ÿå‹•AIåˆ†æä»»å‹™</small>
                            </div>
                        </button>
                        <button class="action-btn" onclick="refreshTools()">
                            <div class="action-icon">ğŸ”„</div>
                            <div>
                                <div>åˆ·æ–°å·¥å…·</div>
                                <small>é‡æ–°æƒæå¯ç”¨å·¥å…·</small>
                            </div>
                        </button>
                        <button class="action-btn" onclick="systemCheck()">
                            <div class="action-icon">ğŸ¥</div>
                            <div>
                                <div>ç³»çµ±æª¢æŸ¥</div>
                                <small>åŸ·è¡Œå¥åº·æª¢æŸ¥</small>
                            </div>
                        </button>
                        <button class="action-btn" onclick="deployToEC2()">
                            <div class="action-icon">â˜ï¸</div>
                            <div>
                                <div>éƒ¨ç½²åˆ°EC2</div>
                                <small>ä¸€éµéƒ¨ç½²åˆ°ç”Ÿç”¢ç’°å¢ƒ</small>
                            </div>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Agent ç®¡ç† -->
            <div id="agent" class="tab-content">
                <div class="action-section">
                    <div class="action-header">
                        <div class="card-icon">ğŸ¤–</div>
                        <h3>Agent é…ç½®</h3>
                    </div>
                    
                    <div class="input-group">
                        <label class="input-label">Agent åç¨±</label>
                        <input type="text" class="input-field" id="agentName" value="enhanced_agent" placeholder="è¼¸å…¥Agentåç¨±">
                    </div>
                    
                    <div class="input-group">
                        <label class="input-label">ç’°å¢ƒé…ç½®</label>
                        <select class="input-field" id="agentEnvironment">
                            <option value="development">é–‹ç™¼ç’°å¢ƒ</option>
                            <option value="production">ç”Ÿç”¢ç’°å¢ƒ</option>
                            <option value="testing">æ¸¬è©¦ç’°å¢ƒ</option>
                        </select>
                    </div>
                    
                    <div class="input-group">
                        <label class="input-label">AI æ¨¡å‹é…ç½®</label>
                        <textarea class="input-field textarea-field" id="modelConfig" placeholder="è¼¸å…¥AIæ¨¡å‹é…ç½®ï¼ˆJSONæ ¼å¼ï¼‰">
{
  "model": "gpt-4",
  "temperature": 0.7,
  "max_tokens": 2000,
  "timeout": 30
}</textarea>
                    </div>
                    
                    <button class="action-btn" onclick="updateAgentConfig()" style="width: 200px;">
                        <div class="action-icon">ğŸ’¾</div>
                        <div>æ›´æ–°é…ç½®</div>
                    </button>
                </div>
            </div>

            <!-- å·¥å…·ç®¡ç† -->
            <div id="tools" class="tab-content">
                <div class="action-section">
                    <div class="action-header">
                        <div class="card-icon">ğŸ”§</div>
                        <h3>å·¥å…·è¨»å†Šè¡¨</h3>
                    </div>
                    
                    <button class="action-btn" onclick="loadTools()" style="width: 200px; margin-bottom: 20px;">
                        <div class="action-icon">ğŸ”„</div>
                        <div>é‡æ–°è¼‰å…¥å·¥å…·</div>
                    </button>
                    
                    <div id="toolsList" class="tool-list">
                        <!-- å·¥å…·åˆ—è¡¨å°‡åœ¨é€™è£¡å‹•æ…‹è¼‰å…¥ -->
                    </div>
                </div>
            </div>

            <!-- ä»£ç¢¼åŸ·è¡Œ -->
            <div id="code-execution" class="tab-content">
                <div class="action-section">
                    <div class="action-header">
                        <div class="card-icon">ğŸ’»</div>
                        <h3>Kilo Code åŸ·è¡Œä¸­å¿ƒ</h3>
                    </div>
                    
                    <div class="input-group">
                        <label class="input-label">ç·¨ç¨‹èªè¨€</label>
                        <div class="language-selector">
                            <button class="language-btn active" onclick="selectLanguage('python')">Python</button>
                            <button class="language-btn" onclick="selectLanguage('javascript')">JavaScript</button>
                            <button class="language-btn" onclick="selectLanguage('shell')">Shell</button>
                            <button class="language-btn" onclick="selectLanguage('sql')">SQL</button>
                        </div>
                    </div>
                    
                    <div class="input-group">
                        <label class="input-label">ä»£ç¢¼å…§å®¹</label>
                        <textarea class="input-field code-editor" id="codeContent" 
                                  placeholder="è«‹è¼¸å…¥è¦åŸ·è¡Œçš„ä»£ç¢¼...

Pythonç¤ºä¾‹:
import math
import json

# è¨ˆç®—æ•¸æ“š
data = [1, 4, 9, 16, 25]
sqrt_data = [math.sqrt(x) for x in data]

result = {
    'original': data,
    'sqrt': sqrt_data,
    'sum': sum(sqrt_data)
}

print(json.dumps(result, indent=2))

JavaScriptç¤ºä¾‹:
const data = [1, 2, 3, 4, 5];
const squared = data.map(x => x * x);
const sum = squared.reduce((a, b) => a + b, 0);

console.log('åŸå§‹æ•¸æ“š:', data);
console.log('å¹³æ–¹æ•¸æ“š:', squared);
console.log('ç¸½å’Œ:', sum);

Shellç¤ºä¾‹:
#!/bin/bash
echo 'ç³»çµ±ä¿¡æ¯:'
uname -a
echo 'ç£ç¢Ÿä½¿ç”¨:'
df -h
echo 'è¨˜æ†¶é«”ä½¿ç”¨:'
free -h"></textarea>
                    </div>
                    
                    <div class="input-group">
                        <label class="input-label">åŸ·è¡Œé¸é …</label>
                        <div style="display: flex; gap: 15px; align-items: center; flex-wrap: wrap;">
                            <label>
                                <input type="checkbox" id="allowNetwork"> å…è¨±ç¶²çµ¡è¨ªå•
                            </label>
                            <label>
                                è¶…æ™‚æ™‚é–“: <input type="number" id="codeTimeout" value="30" min="5" max="300" style="width: 80px;"> ç§’
                            </label>
                            <label>
                                è¨˜æ†¶é«”é™åˆ¶: <input type="number" id="memoryLimit" value="128" min="64" max="512" style="width: 80px;"> MB
                            </label>
                        </div>
                    </div>
                    
                    <button class="action-btn" onclick="executeCode()" style="width: 200px;">
                        <div class="action-icon">â–¶ï¸</div>
                        <div>åŸ·è¡Œä»£ç¢¼</div>
                    </button>
                </div>
            </div>

            <!-- åŸ·è¡Œä¸­å¿ƒ -->
            <div id="execution" class="tab-content">
                <div class="action-section">
                    <div class="action-header">
                        <div class="card-icon">âš¡</div>
                        <h3>ä»»å‹™åŸ·è¡Œ</h3>
                    </div>
                    
                    <div class="input-group">
                        <label class="input-label">ä»»å‹™æè¿°</label>
                        <textarea class="input-field textarea-field" id="taskDescription" placeholder="è«‹æè¿°æ‚¨å¸Œæœ›AgentåŸ·è¡Œçš„ä»»å‹™...

ä¾‹å¦‚ï¼š
- åˆ†æç³»çµ±é‹è¡Œç‹€æ…‹
- æœç´¢ç›¸é—œæŠ€è¡“æ–‡æª”
- åŸ·è¡Œæ•¸æ“šè™•ç†ä»»å‹™
- ç”Ÿæˆåˆ†æå ±å‘Š
- åŸ·è¡ŒPythonä»£ç¢¼é€²è¡Œæ•¸æ“šåˆ†æ
- èª¿ç”¨APIç²å–æ•¸æ“šä¸¦è™•ç†"></textarea>
                    </div>
                    
                    <div class="input-group">
                        <label class="input-label">åŸ·è¡Œæ¨¡å¼</label>
                        <select class="input-field" id="executionMode">
                            <option value="intelligent">æ™ºèƒ½æ¨¡å¼ï¼ˆAIè‡ªå‹•é¸æ“‡ï¼‰</option>
                            <option value="parallel">ä¸¦è¡ŒåŸ·è¡Œ</option>
                            <option value="sequential">é †åºåŸ·è¡Œ</option>
                            <option value="pipeline">ç®¡é“åŸ·è¡Œ</option>
                        </select>
                    </div>
                    
                    <button class="action-btn" onclick="executeTask()" style="width: 200px;">
                        <div class="action-icon">ğŸš€</div>
                        <div>åŸ·è¡Œä»»å‹™</div>
                    </button>
                </div>
            </div>

            <!-- ç›£æ§ä¸­å¿ƒ -->
            <div id="monitoring" class="tab-content">
                <div class="dashboard-grid">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-icon">â±ï¸</div>
                            <div class="card-title">éŸ¿æ‡‰æ™‚é–“</div>
                        </div>
                        <div class="metric-value" id="responseTime">-</div>
                        <div class="metric-label">å¹³å‡éŸ¿æ‡‰æ™‚é–“ (ms)</div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-icon">ğŸ’°</div>
                            <div class="card-title">æˆæœ¬å„ªåŒ–</div>
                        </div>
                        <div class="metric-value" id="costSaving">-</div>
                        <div class="metric-label">æˆæœ¬ç¯€çœç™¾åˆ†æ¯”</div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-icon">ğŸ¯</div>
                            <div class="card-title">æˆåŠŸç‡</div>
                        </div>
                        <div class="metric-value" id="successRate">-</div>
                        <div class="metric-label">ä»»å‹™åŸ·è¡ŒæˆåŠŸç‡</div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-icon">ğŸ”„</div>
                            <div class="card-title">ä¸¦ç™¼è™•ç†</div>
                        </div>
                        <div class="metric-value" id="concurrency">-</div>
                        <div class="metric-label">ç•¶å‰ä¸¦ç™¼è«‹æ±‚æ•¸</div>
                    </div>
                </div>

                <div class="action-section">
                    <div class="action-header">
                        <div class="card-icon">ğŸ“Š</div>
                        <h3>ç³»çµ±ç›£æ§</h3>
                    </div>
                    
                    <button class="action-btn" onclick="loadMetrics()" style="width: 200px;">
                        <div class="action-icon">ğŸ“ˆ</div>
                        <div>è¼‰å…¥ç›£æ§æ•¸æ“š</div>
                    </button>
                </div>
            </div>

            <!-- éƒ¨ç½²ç®¡ç† -->
            <div id="deployment" class="tab-content">
                <div class="action-section">
                    <div class="action-header">
                        <div class="card-icon">ğŸš€</div>
                        <h3>EC2 éƒ¨ç½²é…ç½®</h3>
                    </div>
                    
                    <div class="input-group">
                        <label class="input-label">EC2 æœå‹™å™¨åœ°å€</label>
                        <input type="text" class="input-field" id="ec2Host" value="18.212.97.173" placeholder="EC2 IPåœ°å€">
                    </div>
                    
                    <div class="input-group">
                        <label class="input-label">éƒ¨ç½²è·¯å¾‘</label>
                        <input type="text" class="input-field" id="deployPath" value="/opt/agentic_agent" placeholder="éƒ¨ç½²ç›®æ¨™è·¯å¾‘">
                    </div>
                    
                    <div class="input-group">
                        <label class="input-label">æœå‹™ç«¯å£</label>
                        <input type="number" class="input-field" id="servicePort" value="8080" placeholder="æœå‹™é‹è¡Œç«¯å£">
                    </div>
                    
                    <div class="action-grid">
                        <button class="action-btn" onclick="deployToEC2()">
                            <div class="action-icon">â˜ï¸</div>
                            <div>
                                <div>éƒ¨ç½²åˆ°EC2</div>
                                <small>ä¸€éµéƒ¨ç½²åˆ°ç”Ÿç”¢ç’°å¢ƒ</small>
                            </div>
                        </button>
                        <button class="action-btn" onclick="checkDeployment()">
                            <div class="action-icon">ğŸ”</div>
                            <div>
                                <div>æª¢æŸ¥éƒ¨ç½²ç‹€æ…‹</div>
                                <small>é©—è­‰éƒ¨ç½²æ˜¯å¦æˆåŠŸ</small>
                            </div>
                        </button>
                        <button class="action-btn" onclick="restartService()">
                            <div class="action-icon">ğŸ”„</div>
                            <div>
                                <div>é‡å•Ÿæœå‹™</div>
                                <small>é‡æ–°å•Ÿå‹•Agentæœå‹™</small>
                            </div>
                        </button>
                        <button class="action-btn" onclick="viewLogs()">
                            <div class="action-icon">ğŸ“‹</div>
                            <div>
                                <div>æŸ¥çœ‹æ—¥èªŒ</div>
                                <small>æª¢æŸ¥æœå‹™é‹è¡Œæ—¥èªŒ</small>
                            </div>
                        </button>
                    </div>
                </div>
            </div>

            <!-- è¼‰å…¥å‹•ç•« -->
            <div id="loading" class="loading">
                <div class="spinner"></div>
                <h3>Agent æ­£åœ¨åŸ·è¡Œä»»å‹™...</h3>
                <p>ä½¿ç”¨å¢å¼·ç‰ˆç°¡åŒ–æ¶æ§‹é€²è¡Œæ™ºèƒ½è™•ç†</p>
            </div>

            <!-- çµæœé¡¯ç¤º -->
            <div id="results" class="results-section">
                <div class="results-header">
                    <div class="card-icon">âœ…</div>
                    <h3>åŸ·è¡Œçµæœ</h3>
                </div>
                <div id="resultsContent" class="results-content"></div>
            </div>
        </div>
    </div>

    <script>
        // å…¨å±€è®Šé‡
        let currentTab = 'dashboard';
        let agentStatus = 'running';
        let selectedLanguage = 'python';

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            updateTime();
            setInterval(updateTime, 1000);
            loadDashboardData();
        });

        // æ›´æ–°æ™‚é–“
        function updateTime() {
            const now = new Date();
            document.getElementById('currentTime').textContent = now.toLocaleTimeString('zh-TW');
        }

        // åˆ‡æ›æ¨™ç±¤
        function switchTab(tabName) {
            // éš±è—æ‰€æœ‰æ¨™ç±¤å…§å®¹
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // ç§»é™¤æ‰€æœ‰æ¨™ç±¤çš„activeç‹€æ…‹
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // é¡¯ç¤ºé¸ä¸­çš„æ¨™ç±¤å…§å®¹
            document.getElementById(tabName).classList.add('active');
            
            // è¨­ç½®é¸ä¸­çš„æ¨™ç±¤ç‚ºactive
            event.target.classList.add('active');
            
            currentTab = tabName;
            
            // æ ¹æ“šæ¨™ç±¤è¼‰å…¥ç›¸æ‡‰æ•¸æ“š
            switch(tabName) {
                case 'dashboard':
                    loadDashboardData();
                    break;
                case 'tools':
                    loadTools();
                    break;
                case 'monitoring':
                    loadMetrics();
                    break;
            }
        }

        // é¸æ“‡ç·¨ç¨‹èªè¨€
        function selectLanguage(language) {
            selectedLanguage = language;
            
            // æ›´æ–°æŒ‰éˆ•ç‹€æ…‹
            document.querySelectorAll('.language-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // æ›´æ–°ä»£ç¢¼ç¤ºä¾‹
            updateCodeExample(language);
        }

        // æ›´æ–°ä»£ç¢¼ç¤ºä¾‹
        function updateCodeExample(language) {
            const codeContent = document.getElementById('codeContent');
            const examples = {
                python: `import math
import json

# è¨ˆç®—æ•¸æ“š
data = [1, 4, 9, 16, 25]
sqrt_data = [math.sqrt(x) for x in data]

result = {
    'original': data,
    'sqrt': sqrt_data,
    'sum': sum(sqrt_data)
}

print(json.dumps(result, indent=2))`,
                javascript: `const data = [1, 2, 3, 4, 5];
const squared = data.map(x => x * x);
const sum = squared.reduce((a, b) => a + b, 0);

console.log('åŸå§‹æ•¸æ“š:', data);
console.log('å¹³æ–¹æ•¸æ“š:', squared);
console.log('ç¸½å’Œ:', sum);`,
                shell: `#!/bin/bash
echo 'ç³»çµ±ä¿¡æ¯:'
uname -a
echo 'ç£ç¢Ÿä½¿ç”¨:'
df -h
echo 'è¨˜æ†¶é«”ä½¿ç”¨:'
free -h`,
                sql: `-- ç¤ºä¾‹SQLæŸ¥è©¢
SELECT 
    COUNT(*) as total_records,
    AVG(value) as average_value,
    MAX(value) as max_value,
    MIN(value) as min_value
FROM sample_table
WHERE created_at >= '2024-01-01'
GROUP BY category
ORDER BY average_value DESC;`
            };
            
            if (examples[language]) {
                codeContent.value = examples[language];
            }
        }

        // è¼‰å…¥å„€è¡¨æ¿æ•¸æ“š
        async function loadDashboardData() {
            try {
                const response = await fetch('/api/dashboard');
                const data = await response.json();
                
                if (data.success) {
                    document.getElementById('toolCount').textContent = data.tool_count || 0;
                    document.getElementById('taskCount').textContent = data.active_tasks || 0;
                    document.getElementById('performance').textContent = data.performance || 'å„ªç§€';
                }
            } catch (error) {
                console.error('è¼‰å…¥å„€è¡¨æ¿æ•¸æ“šå¤±æ•—:', error);
            }
        }

        // è¼‰å…¥å·¥å…·åˆ—è¡¨
        async function loadTools() {
            try {
                const response = await fetch('/api/tools');
                const data = await response.json();
                
                if (data.success) {
                    const toolsList = document.getElementById('toolsList');
                    toolsList.innerHTML = '';
                    
                    data.tools.forEach(tool => {
                        const toolElement = document.createElement('div');
                        toolElement.className = 'tool-item';
                        toolElement.innerHTML = `
                            <div class="tool-name">${tool.name}</div>
                            <div class="tool-description">${tool.description}</div>
                            <div class="tool-capabilities">
                                ${tool.capabilities.map(cap => `<span class="capability-tag">${cap}</span>`).join('')}
                            </div>
                        `;
                        toolsList.appendChild(toolElement);
                    });
                }
            } catch (error) {
                console.error('è¼‰å…¥å·¥å…·åˆ—è¡¨å¤±æ•—:', error);
                document.getElementById('toolsList').innerHTML = '<p>è¼‰å…¥å·¥å…·åˆ—è¡¨å¤±æ•—</p>';
            }
        }

        // è¼‰å…¥ç›£æ§æ•¸æ“š
        async function loadMetrics() {
            try {
                const response = await fetch('/api/metrics');
                const data = await response.json();
                
                if (data.success) {
                    document.getElementById('responseTime').textContent = data.response_time + 'ms';
                    document.getElementById('costSaving').textContent = data.cost_saving + '%';
                    document.getElementById('successRate').textContent = data.success_rate + '%';
                    document.getElementById('concurrency').textContent = data.concurrency;
                }
            } catch (error) {
                console.error('è¼‰å…¥ç›£æ§æ•¸æ“šå¤±æ•—:', error);
            }
        }

        // åŸ·è¡Œä»£ç¢¼
        async function executeCode() {
            const language = selectedLanguage;
            const code = document.getElementById('codeContent').value.trim();
            const allowNetwork = document.getElementById('allowNetwork').checked;
            const timeout = parseInt(document.getElementById('codeTimeout').value);
            const memoryLimit = parseInt(document.getElementById('memoryLimit').value);
            
            if (!code) {
                alert('è«‹è¼¸å…¥è¦åŸ·è¡Œçš„ä»£ç¢¼');
                return;
            }
            
            showLoading();
            try {
                const response = await fetch('/api/code/execute', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        language: language,
                        code: code,
                        allow_network: allowNetwork,
                        timeout: timeout,
                        memory_limit: memoryLimit
                    })
                });
                
                const result = await response.json();
                showCodeExecutionResults(result);
            } catch (error) {
                showResults({ success: false, error: 'ä»£ç¢¼åŸ·è¡Œå¤±æ•—: ' + error.message });
            } finally {
                hideLoading();
            }
        }

        // é¡¯ç¤ºä»£ç¢¼åŸ·è¡Œçµæœ
        function showCodeExecutionResults(result) {
            const resultsContent = document.getElementById('resultsContent');
            
            if (result.success) {
                resultsContent.innerHTML = `
åŸ·è¡Œç‹€æ…‹: âœ… æˆåŠŸ
ç·¨ç¨‹èªè¨€: ${result.language || selectedLanguage}
åŸ·è¡Œæ™‚é–“: ${result.execution_time?.toFixed(3) || 'N/A'}ç§’
è¨˜æ†¶é«”ä½¿ç”¨: ${result.memory_usage || 'N/A'}MB

ğŸ“¤ åŸ·è¡Œçµæœ:
${result.result || '(ç„¡è¿”å›å€¼)'}

ğŸ“‹ æ¨™æº–è¼¸å‡º:
${result.stdout || '(ç„¡è¼¸å‡º)'}

${result.stderr ? 'âš ï¸ éŒ¯èª¤è¼¸å‡º:\n' + result.stderr : ''}

ğŸ”§ åŸ·è¡Œç’°å¢ƒ:
- æ²™ç›’ID: ${result.sandbox_id || 'N/A'}
- å®‰å…¨ç´šåˆ¥: ${result.security_level || 'æ¨™æº–'}
                `;
            } else {
                resultsContent.innerHTML = `
åŸ·è¡Œç‹€æ…‹: âŒ å¤±æ•—
ç·¨ç¨‹èªè¨€: ${selectedLanguage}
éŒ¯èª¤ä¿¡æ¯: ${result.error || 'æœªçŸ¥éŒ¯èª¤'}

${result.stderr ? 'è©³ç´°éŒ¯èª¤:\n' + result.stderr : ''}

ğŸ’¡ å»ºè­°:
- æª¢æŸ¥ä»£ç¢¼èªæ³•æ˜¯å¦æ­£ç¢º
- ç¢ºèªæ˜¯å¦æœ‰æ¬Šé™é™åˆ¶
- æª¢æŸ¥è³‡æºä½¿ç”¨æ˜¯å¦è¶…é™
                `;
            }
            
            document.getElementById('results').style.display = 'block';
            document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
        }

        // å¿«é€Ÿåˆ†æ
        async function quickAnalysis() {
            showLoading();
            try {
                const response = await fetch('/api/quick-analysis', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ action: 'system_status' })
                });
                
                const result = await response.json();
                showResults(result);
            } catch (error) {
                showResults({ success: false, error: 'å¿«é€Ÿåˆ†æå¤±æ•—: ' + error.message });
            } finally {
                hideLoading();
            }
        }

        // åˆ·æ–°å·¥å…·
        async function refreshTools() {
            try {
                const response = await fetch('/api/tools/refresh', { method: 'POST' });
                const result = await response.json();
                
                if (result.success) {
                    alert('å·¥å…·åˆ·æ–°æˆåŠŸï¼');
                    loadTools();
                    loadDashboardData();
                } else {
                    alert('å·¥å…·åˆ·æ–°å¤±æ•—: ' + result.error);
                }
            } catch (error) {
                alert('å·¥å…·åˆ·æ–°å¤±æ•—: ' + error.message);
            }
        }

        // ç³»çµ±æª¢æŸ¥
        async function systemCheck() {
            showLoading();
            try {
                const response = await fetch('/api/health-check', { method: 'POST' });
                const result = await response.json();
                showResults(result);
            } catch (error) {
                showResults({ success: false, error: 'ç³»çµ±æª¢æŸ¥å¤±æ•—: ' + error.message });
            } finally {
                hideLoading();
            }
        }

        // åŸ·è¡Œä»»å‹™
        async function executeTask() {
            const description = document.getElementById('taskDescription').value.trim();
            const mode = document.getElementById('executionMode').value;
            
            if (!description) {
                alert('è«‹è¼¸å…¥ä»»å‹™æè¿°');
                return;
            }
            
            showLoading();
            try {
                const response = await fetch('/api/execute', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        task: description,
                        mode: mode
                    })
                });
                
                const result = await response.json();
                showResults(result);
            } catch (error) {
                showResults({ success: false, error: 'ä»»å‹™åŸ·è¡Œå¤±æ•—: ' + error.message });
            } finally {
                hideLoading();
            }
        }

        // æ›´æ–°Agenté…ç½®
        async function updateAgentConfig() {
            const name = document.getElementById('agentName').value;
            const environment = document.getElementById('agentEnvironment').value;
            const modelConfig = document.getElementById('modelConfig').value;
            
            try {
                const config = JSON.parse(modelConfig);
                
                const response = await fetch('/api/agent/config', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        name: name,
                        environment: environment,
                        model_config: config
                    })
                });
                
                const result = await response.json();
                
                if (result.success) {
                    alert('Agenté…ç½®æ›´æ–°æˆåŠŸï¼');
                } else {
                    alert('é…ç½®æ›´æ–°å¤±æ•—: ' + result.error);
                }
            } catch (error) {
                alert('é…ç½®æ ¼å¼éŒ¯èª¤æˆ–æ›´æ–°å¤±æ•—: ' + error.message);
            }
        }

        // éƒ¨ç½²åˆ°EC2
        async function deployToEC2() {
            const host = document.getElementById('ec2Host').value;
            const path = document.getElementById('deployPath').value;
            const port = document.getElementById('servicePort').value;
            
            if (!host || !path || !port) {
                alert('è«‹å¡«å¯«å®Œæ•´çš„éƒ¨ç½²é…ç½®');
                return;
            }
            
            showLoading();
            try {
                const response = await fetch('/api/deploy', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        host: host,
                        path: path,
                        port: parseInt(port)
                    })
                });
                
                const result = await response.json();
                showResults(result);
            } catch (error) {
                showResults({ success: false, error: 'éƒ¨ç½²å¤±æ•—: ' + error.message });
            } finally {
                hideLoading();
            }
        }

        // æª¢æŸ¥éƒ¨ç½²ç‹€æ…‹
        async function checkDeployment() {
            const host = document.getElementById('ec2Host').value;
            const port = document.getElementById('servicePort').value;
            
            showLoading();
            try {
                const response = await fetch('/api/deployment/status', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ host: host, port: parseInt(port) })
                });
                
                const result = await response.json();
                showResults(result);
            } catch (error) {
                showResults({ success: false, error: 'æª¢æŸ¥éƒ¨ç½²ç‹€æ…‹å¤±æ•—: ' + error.message });
            } finally {
                hideLoading();
            }
        }

        // é‡å•Ÿæœå‹™
        async function restartService() {
            showLoading();
            try {
                const response = await fetch('/api/service/restart', { method: 'POST' });
                const result = await response.json();
                showResults(result);
            } catch (error) {
                showResults({ success: false, error: 'é‡å•Ÿæœå‹™å¤±æ•—: ' + error.message });
            } finally {
                hideLoading();
            }
        }

        // æŸ¥çœ‹æ—¥èªŒ
        async function viewLogs() {
            showLoading();
            try {
                const response = await fetch('/api/logs');
                const result = await response.json();
                showResults(result);
            } catch (error) {
                showResults({ success: false, error: 'ç²å–æ—¥èªŒå¤±æ•—: ' + error.message });
            } finally {
                hideLoading();
            }
        }

        // é¡¯ç¤ºè¼‰å…¥å‹•ç•«
        function showLoading() {
            document.getElementById('loading').style.display = 'block';
            document.getElementById('results').style.display = 'none';
        }

        // éš±è—è¼‰å…¥å‹•ç•«
        function hideLoading() {
            document.getElementById('loading').style.display = 'none';
        }

        // é¡¯ç¤ºçµæœ
        function showResults(result) {
            const resultsContent = document.getElementById('resultsContent');
            
            if (result.success) {
                resultsContent.innerHTML = `
åŸ·è¡Œç‹€æ…‹: âœ… æˆåŠŸ
åŸ·è¡Œæ™‚é–“: ${result.execution_time || 'N/A'}
çµæœé¡å‹: ${result.result_type || 'N/A'}

${result.result || result.message || 'æ“ä½œå®Œæˆ'}

${result.details ? '\nè©³ç´°ä¿¡æ¯:\n' + JSON.stringify(result.details, null, 2) : ''}
                `;
            } else {
                resultsContent.innerHTML = `
åŸ·è¡Œç‹€æ…‹: âŒ å¤±æ•—
éŒ¯èª¤ä¿¡æ¯: ${result.error || 'æœªçŸ¥éŒ¯èª¤'}

${result.details ? 'è©³ç´°ä¿¡æ¯:\n' + JSON.stringify(result.details, null, 2) : ''}
                `;
            }
            
            document.getElementById('results').style.display = 'block';
            document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
        }

        // é é¢è¼‰å…¥æ™‚æª¢æŸ¥ç³»çµ±ç‹€æ…‹
        window.addEventListener('load', async function() {
            try {
                const response = await fetch('/api/health');
                const health = await response.json();
                
                if (health.status === 'healthy') {
                    console.log('âœ… Agentic Agent ç³»çµ±é‹è¡Œæ­£å¸¸');
                    agentStatus = 'healthy';
                } else {
                    console.warn('âš ï¸ ç³»çµ±ç‹€æ…‹ç•°å¸¸');
                    agentStatus = 'warning';
                }
            } catch (error) {
                console.warn('âš ï¸ ç„¡æ³•é€£æ¥åˆ°Agentæœå‹™');
                agentStatus = 'error';
            }
        });
    </script>
</body>
</html>

